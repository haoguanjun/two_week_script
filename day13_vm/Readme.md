# 第 13 章 设计中间代码解释器

在使用中间代码解释器的时候，首先将抽象语法树转换为中间代码，然后基于中间代码解释执行。

## Stone 虚拟机

Stone 虚拟机由若干个通用寄存器和内存组成。

内存分为 4 个区域：

1. 栈区 Stack
2. 堆区 Heap
3. 代码区 Code
4. 字符串常量区 

Stone 虚拟机除了通用寄存器之外，还提供 4 个寄存器，它们都能储存 int 类型的整数值

1. PC，程序寄存器
2. FP，帧寄存器
3. SP，栈寄存器。帧寄存器和栈寄存器联合管理堆栈区
4. RET，用于函数调用操作

算数运算只能在寄存器之间进行。

例如，下面的指令将整数 67 保存到名为 r2 的寄存器中。

```
iconst 67 r2
```



